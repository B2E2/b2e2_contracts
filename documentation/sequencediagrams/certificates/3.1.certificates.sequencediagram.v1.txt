#title 3.1 Certificates 

actor MeteringAuthority
materialdesignicons f199 Smart Meter
participant MeteringAuthority
participant MeteringAuthority.sol
participant ConsumptionPlant.sol
participant EnergyToken.sol






MeteringAuthority<-Smart Meter:Consumer has \nconsumed 90 kWh.
activate MeteringAuthority
MeteringAuthority->MeteringAuthority.sol:execute(...)
deactivate MeteringAuthority
activate MeteringAuthority.sol
MeteringAuthority.sol->EnergyToken.sol:**addMeasuredEnergyConsumption**(\n<<address of ConsumptionPlant.sol>>, \n<<90 kWh>>, \n<<_balancePeriod>>, \ncorrected=false)
deactivate MeteringAuthority.sol
activate EnergyToken.sol

ConsumptionPlant.sol<-EnergyToken.sol:get Claims

activate ConsumptionPlant.sol
ConsumptionPlant.sol-->>EnergyToken.sol:[<<Balance Claim>>, \n<<Existence Claim>>, \n<<Metering Claim>>]
deactivate ConsumptionPlant.sol
MeteringAuthority.sol<-EnergyToken.sol:get Claim
activate MeteringAuthority.sol
MeteringAuthority.sol-->>EnergyToken.sol:<<Is Metering Authority Claim>>
deactivate MeteringAuthority.sol
EnergyToken.sol->EnergyToken.sol:verify claims 
EnergyToken.sol->EnergyToken.sol:write measured values \nin kWh

EnergyToken.sol -->>MeteringAuthority:**event MeasuredEnergyConsumption**(\n<<address of ConsumptionPlant.sol>>, \n<<90 kWh>>, \n<<_balancePeriod>>, \ncorrected=false\n)
deactivate EnergyToken.sol

end 